\chapter{绪论}
\label{chap:intro}

\section{研究背景}
\subsection{程序验证}
计算机技术已经广泛地应用到我们的日常生活中。种类繁多的计算机软件在提供丰富功能的同时，其缺陷也给人们带来困扰。

在一些关键领域，如航天、电信、银行，软件的缺陷可能引发重大的人身和财产损失。因此，提高这些软件的可靠性十分必要。
程序验证（Program Verification）就是一种通过逻辑推理来证明软件具有特定安全性质，从而提高软件可靠性的方法。

1969年，C. A. R. Hoare提出了验证程序正确性的公理系统：Hoare逻辑\cite{Hoare69}。从此Hoare逻辑成为程序验证的重要方法。

\subsection{携带证明的代码}
携带证明的代码（Proof Carrying Code）\cite{Necula97}\cite{Necula98}是由Necula提出的。携带证明的代码携带了机器可检查的证明项（Machine Checkable Proof Term），证明项能够说明代码能满足所需的安全性质。代码消费方仅需用可信任的证明检查器(Proof Checker)去静态地检查证明项，就能够检查程序的安全性。

携带证明的代码的构造给定理证明器提出了新的要求，即定理证明器在宣告命题成立的同时，还要给出相应的机器可检查证明项。

\subsection{分离逻辑}
分离逻辑（Separation Logic）\cite{Reynolds02}是Hoare逻辑的一种扩充。其核心是引入分离合取（Separation Conjuntion）符号，描述两个堆存储区域不相交，从而能够验证一类带有指针的程序。

\section{相关工作}
\subsection{定理证明系统}
Z3\cite{z3}\cite{DeMoura:2008:ZES:1792734.1792766}是微软研究院出品的高性能自动定理证明器。Z3属于SMT求解器，由一个SAT求解器和多个理论求解器组合而成。Z3目前能够支持多种一阶理论的自动证明，如线性算术、位向量、未解释函数、数组、量词等。此外，支持多种输入格式和编程接口，被广泛用于程序验证等领域。

Coq\cite{coq}是一种高阶逻辑（Higher-Order Logic）的定理证明辅助系统。Coq提供了一个表达力很器的语言及一个交互式的证明环境。Coq的证明过程不是完全自动的，而是需要人交互地给系统提示，最终构造出机器可检查的证明项。

\subsection{分离逻辑证明}
分离逻辑的证明工具以Smallfoot\cite{smallfoot}为代表。它提供是一个基于分离逻辑的自动的验证工具原型。

\subsection{讨论}
以面向分离逻辑程序验证的角度，现有定理证明器的主要问题是：表达能力、自动化、可信性三者没有作出很好的折中。

Z3是全自动的，但表达能力不足以包括分离逻辑。虽然能够出具证明，但格式为自定义的，不能被广泛信任的Coq证明检查器检查。

Coq被看作一个逻辑框架而被广泛研究和信任，但由于表达能力过强，很多应该自动化的推理无法自动进行。

Smallfoot等虽然能表达分离逻辑，但不能出具证明。由于是用于演示分离逻辑验证的原型系统，支持的理论也不够丰富。

\section{本文工作}
本文针对目前定理证明器的不足，从头设计一个分离逻辑的定理证明器。力图达到表达能力、自动化、可信性三者平衡。

本文的证明器采用与Z3相似的SMT结构。因此工作重点在于输出可信任的Coq兼容证明项，以克服其可信性不足的缺点。

本文后续安排如下：

第\ref{chap:struct}章说明证明器的总体设计。接下来的每一章根据设计框图的划分逐一说明具体的设计。最后介绍实现情况和测试，总结全文。
